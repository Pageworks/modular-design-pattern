// Form Variables
// ==========================================================================

/* Used for all inputs  */
$base-margin-bottom: $unit + $unit-half;

/* Used when an input has a helper or error  */
$expanded-margin-bottom: $unit*2 + $unit-half;

// Background Colors Config
// ==========================================================================
.o-form{
    label{
        .-base-background & {
            color: contrast($base-background-color, 0.6);
        }

        .-secondary-background & {
            color: contrast($secondary-background-color, 0.6);
        }

        .-dark-background & {
            color: contrast($dark-background-color, 0.6);
        }

        .-brand-background & {
            color: contrast($brand-background-color, 0.6);
        }
    }

    .o-help{
        .-base-background & {
            color: contrast($base-background-color, 0.5);
        }

        .-secondary-background & {
            color: contrast($secondary-background-color, 0.5);
        }

        .-dark-background & {
            color: contrast($dark-background-color, 0.5);
        }

        .-brand-background & {
            color: contrast($brand-background-color, 0.5);
        }
    }

    .o-arrow{
        .-base-background & {
            color: contrast($base-background-color, 0.6);
        }

        .-secondary-background & {
            color: contrast($secondary-background-color, 0.6);
        }

        .-dark-background & {
            color: contrast($dark-background-color, 0.6);
        }

        .-brand-background & {
            color: contrast($brand-background-color, 0.6);
        }
    }

    .o-textarea{
        textarea{
            .-base-background & {
                border-color: contrast($base-background-color, 0.3);
                color: $font-base;

                @include hover{
                    border-color: contrast($base-background-color, 0.6);
                    transition: border 150ms $ease-in;
                }

                &:focus{
                    border-color: $primary !important;

                    & + label{
                        color: $primary;
                    }
                }
            }

            .-secondary-background & {
                border-color: contrast($secondary-background-color, 0.3);
                color: $font-base;

                @include hover{
                    border-color: contrast($secondary-background-color, 0.6);
                    transition: border 150ms $ease-in;
                }

                &:focus{
                    border-color: $primary !important;

                    & + label{
                        color: $primary;
                    }
                }
            }

            .-dark-background & {
                border-color: contrast($dark-background-color, 0.3);
                color: $font-alt;

                @include hover{
                    border-color: contrast($dark-background-color, 0.6);
                    transition: border 150ms $ease-in;
                }

                &:focus{
                    border-color: $primary-alt !important;

                    & + label{
                        color: $primary-alt;
                    }
                }
            }

            .-brand-background & {
                border-color: contrast($brand-background-color, 0.3);
                color: contrast($brand-background-color);

                @include hover{
                    border-color: contrast($brand-background-color, 0.6);
                    transition: border 150ms $ease-in;
                }

                &:focus{
                    border-color: $primary-alt !important;

                    & + label{
                        color: $primary-alt;
                    }
                }
            }
        }
    }

    .o-input{
        input,
        select{
            .-base-background & {
                color: $font-base;
            }

            .-secondary-background & {
                color: $font-base;
            }

            .-dark-background & {
                color: $font-alt;
            }

            .-brand-background & {
                color: contrast($brand-background-color);
            }
        }

        .-visible,
        .-hidden{
            .-base-background & {
                color: contrast($base-background-color);

                &:before,
                &:after{
                    background-color: $primary;
                }
            }

            .-secondary-background & {
                color: contrast($secondary-background-color);

                &:before,
                &:after{
                    background-color: $primary;
                }
            }

            .-dark-background & {
                color: contrast($dark-background-color);

                &:before,
                &:after{
                    background-color: $primary-alt;
                }
            }

            .-brand-background & {
                color: contrast($brand-background-color);

                &:before,
                &:after{
                    background-color: $primary-alt;
                }
            }
        }
    }

    .o-radio,
    .o-checkbox,
    .o-switch{
        .o-checkbox_icon,
        .o-radio_icon,
        .o-switch_icon .o-switch_handle{
            &:before,
            &:after{
                .-base-background & {
                    background-color: $primary;
                }

                .-secondary-background & {
                    background-color: $primary;
                }

                .-dark-background & {
                    background-color: $primary-alt;
                }

                .-brand-background & {
                    background-color: $primary-alt;
                }
            }
        }

        .o-radio_outter,
        .o-radio_inner,
        .o-checkbox_box{
            .-base-background & {
                border-color: $primary;
            }

            .-secondary-background & {
                border-color: $primary;
            }

            .-dark-background & {
                border-color: $primary-alt;
            }

            .-brand-background & {
                border-color: $primary-alt;
            }
        }
    }

    .o-checkbox{
        .o-checkbox_item{
            .o-checkbox_check{
                path{
                    .-base-background & {
                        stroke: contrast($primary, 0.87) !important;
                    }

                    .-secondary-background & {
                        stroke: contrast($primary, 0.87) !important;
                    }

                    .-dark-background & {
                        stroke: contrast($primary-alt, 0.87) !important;
                    }

                    .-brand-background & {
                        stroke: contrast($primary-alt, 0.87) !important;
                    }
                }
            }

            input{
                &:checked{
                    & + label{
                        .o-checkbox_icon{
                            .o-checkbox_box{
                                .-base-background & {
                                    background-color: $primary;
                                }

                                .-secondary-background & {
                                    background-color: $primary;
                                }

                                .-dark-background & {
                                    background-color: $primary-alt;
                                }

                                .-brand-background & {
                                    background-color: $primary-alt;
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    .o-switch{
        .o-switch_item{
            input{
                &:checked{
                    & + label{
                        .o-switch_icon{
                            .o-switch_handle{
                                .o-switch_circle{
                                    .-base-background & {
                                        border-color: $primary;
                                    }

                                    .-secondary-background & {
                                        border-color: $primary;
                                    }

                                    .-dark-background & {
                                        border-color: $primary-alt;
                                    }

                                    .-brand-background & {
                                        border-color: $primary-alt;
                                    }
                                }
                            }

                            .o-switch_track{
                                .-base-background & {
                                    background-color: $primary;
                                }

                                .-secondary-background & {
                                    background-color: $primary;
                                }

                                .-dark-background & {
                                    background-color: $primary-alt;
                                }

                                .-brand-background & {
                                    background-color: $primary-alt;
                                }
                            }
                        }
                    }
                }
            }

            label{
                .o-switch_icon{
                    .o-switch_track{
                        background-color: $black;
                    }
                }
            }
        }
    }
}

// Form Object Config
// ==========================================================================
.o-switch{
    height: 48px !important;
    width: 100% !important;
    margin-bottom: $base-margin-bottom !important;
    position: relative !important;

    &.is-invalid{
        .o-help{
            opacity: 0;
            transition: opacity 25ms $ease-sharp;
        }

        .o-error{
            opacity: 1;
            transform: translateY(0);
            transition: transform 150ms $ease-in, opacity 25ms $ease-in;
        }
    }

    .o-switch_item{
        width: 100% !important;
        height: 100% !important;
        position: relative !important;

        input{
            &:checked{
                & + label{
                    .o-switch_icon{
                        .o-switch_handle{
                            transform: translateX(20px) !important;
                        }

                        .o-switch_track{
                            opacity: 0.54;
                        }
                    }
                }
            }
        }

        label{
            width: 100%  !important;
            height: 100%  !important;
            display: flex !important;
            align-items: center !important;
            justify-content: space-between !important;
            pointer-events: all !important;
            left: 0 !important;
            bottom: 0 !important;

            .o-switch_icon{
                display: inline-flex !important;
                align-items: center !important;
                cursor: pointer !important;

                @include active{
                    .o-switch_handle{
                        &:after{
                            transform: scale(1);
                            opacity: $primary-active-opacity;
                            transition: transform 150ms $ease-in, opacity 75ms $ease-in;
                        }
                    }
                }

                @include hover{
                    .o-switch_handle{
                        &:before{
                            transform: scale(1);
                            opacity: $primary-hover-opacity;
                            transition: transform 150ms $ease-in, opacity 75ms $ease-in;
                        }
                    }
                }

                .o-switch_track{
                    opacity: 0.3;
                    border-radius: 7px;
                    @include size(30px, 12px);
                    transition: background-color 150ms $ease;
                }

                .o-switch_handle{
                    @include size(10px, 10px);
                    position: absolute;
                    transform: translateX(0);
                    display: inline-flex;
                    justify-content: center;
                    align-items: center;
                    flex-direction: column;
                    transition: transform 150ms $ease;

                    .o-switch_circle{
                        border-width: 10px;
                        border-style: solid;
                        border-color: $white;
                        box-shadow: 0 3px 1px -2px rgba(0,0,0,.2), 0 2px 2px 0 rgba(0,0,0,.14), 0 1px 5px 0 rgba(0,0,0,.12);
                        border-radius: 100%;
                        position: absolute;
                        z-index: 5;
                        transition: border-color 150ms $ease;
                    }

                    &::before{
                        content:"";
                        position: absolute;
                        display: inline-block;
                        border-radius: 100%;
                        @include size(42px, 42px);
                        transform: scale(0);
                        opacity: 0;
                        z-index: 1;
                        transition: transform 125ms $ease-sharp, opacity 25ms 100ms $ease-out;
                    }

                    &::after{
                        content:"";
                        position: absolute;
                        display: inline-block;
                        border-radius: 100%;
                        @include size(42px, 42px);
                        transform: scale(0);
                        opacity: 0;
                        z-index: 2;
                        transition: transform 150ms $ease-sharp, opacity 25ms 50ms $ease-out;
                    }
                }
            }

            span{
                cursor: pointer !important;
            }
        }

        .o-help,{
            position: relative;
            padding: 0;
            margin-top: 4px;
        }

        .o-error{
            padding: 0;
            bottom: 2px;
            top: auto;
        }
    }
}

.o-radio{
    position: relative !important;
    padding: $unit 0 0 !important;
    text-align: left !important;
    width: 100% !important;
    margin-bottom: $base-margin-bottom !important;
    margin-top: $base-margin-bottom !important;

    &.has-helper{
        margin-bottom: $expanded-margin-bottom;
    }

    label{
        position: absolute !important;
        top: 0 !important;
        left: $unit-half !important;
    }

    .o-radio_item{
        display: flex !important;
        align-items: center !important;
        margin: $unit !important;

        label{
            display: flex !important;
            align-items: center !important;
        }

        @include hover{
            cursor: pointer !important;

            .o-radio_icon{
                &:before{
                    transform: scale(1);
                    opacity: $primary-hover-opacity;
                    transition: transform 150ms $ease-in, opacity 75ms $ease-in;
                }
            }
        }

        @include active{
            .o-radio_icon{
                &:after{
                    transform: scale(1);
                    opacity: $primary-active-opacity;
                    transition: transform 150ms $ease-in, opacity 75ms $ease-in;
                }
            }
        }

        .o-radio_icon{
            @include size(20px, 20px);
            display: inline-flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            margin-right: $unit;
            position: relative;
            pointer-events: none;

            &::before{
                content:"";
                position: absolute;
                display: inline-block;
                border-radius: 100%;
                @include size(32px, 32px);
                transform: scale(0);
                opacity: 0;
                transition: transform 125ms $ease-sharp, opacity 25ms 100ms $ease-out;
            }

            &::after{
                content:"";
                position: absolute;
                display: inline-block;
                border-radius: 100%;
                @include size(32px, 32px);
                transform: scale(0);
                opacity: 0;
                transition: transform 150ms $ease-sharp, opacity 25ms 50ms $ease-out;
            }

            .o-radio_outter{
                @include size(16px, 16px);
                border-radius: 100%;
                border-width: 2px;
                border-style: solid;
                position: absolute;
            }

            .o-radio_inner{
                transform: scale(0);
                @include size(100%, 100%);
                border-width: 10px;
                border-style: solid;
                border-radius: 100%;
                position: absolute;
                transition: transform 125ms $ease-sharp;
            }
        }

        input{
            &:checked{
                & + label{
                    .o-radio_icon{
                        .o-radio_inner{
                            transform: scale(0.4) !important;
                            transition: transform 150ms $ease-in;
                        }
                    }
                }
            }

            & + label{
                vertical-align: middle !important;
                position: relative !important;
                left: 0 !important;
                pointer-events: all !important;
                cursor: pointer !important;
            }
        }
    }

    .o-help,
    .o-error{
        padding: 0 0 0 $unit-half !important;
    }
}

.o-checkbox{
    position: relative !important;
    padding: $unit 0 0 !important;
    width: 100% !important;
    margin-bottom: $base-margin-bottom !important;
    margin-top: $base-margin-bottom !important;

    &.has-helper{
        margin-bottom: $expanded-margin-bottom;
    }

    label{
        position: absolute !important;
        top: 0 !important;
        left: $unit-half !important;
    }

    .o-checkbox_item{
        label{
            height: 24px !important;
            line-height: 24px !important;
            display: flex !important;
            align-items: center !important;
            margin: $unit !important;
        }

        @include hover{
            cursor: pointer !important;

            .o-checkbox_icon{
                &:before{
                    transform: scale(1);
                    opacity: $primary-hover-opacity;
                    transition: transform 150ms $ease-in, opacity 75ms $ease-in;
                }
            }
        }

        @include active{
            .o-checkbox_icon{
                &:after{
                    transform: scale(1);
                    opacity: $primary-active-opacity;
                    transition: transform 150ms $ease-in, opacity 75ms $ease-in;
                }
            }
        }

        .o-checkbox_icon{
            @include size(20px, 20px);
            display: inline-flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            margin-right: $unit;
            position: relative;
            pointer-events: none;

            &::before{
                content:"";
                position: absolute;
                display: inline-block;
                border-radius: 100%;
                @include size(32px, 32px);
                transform: scale(0);
                opacity: 0;
                transition: transform 125ms $ease-sharp, opacity 25ms 100ms $ease-out;
            }

            &::after{
                content:"";
                position: absolute;
                display: inline-block;
                border-radius: 100%;
                @include size(32px, 32px);
                transform: scale(0);
                opacity: 0;
                transition: transform 150ms $ease-sharp, opacity 25ms 50ms $ease-out;
            }

            .o-checkbox_box{
                position: absolute;
                @include size(16px, 16px);
                border-radius: 2px;
                border-width: 2px;
                border-style: solid;
                background: transparent;
                transition: background-color 150ms $ease-sharp;
            }

            .o-checkbox_check{
                position: absolute;
                transform: scale(0.5);

                path{
                    stroke-width: 3px;
                    stroke-linecap: round;
                    stroke-dasharray: 30;
                    stroke-dashoffset: 30;
                    transition: stroke-dashoffset 150ms $ease-sharp;
                }
            }
        }

        input{
            &:checked{
                & + label{
                    .o-checkbox_icon{
                        .o-checkbox_box{
                            // background: $primary !important;
                            transition: background 150ms $ease-in;
                        }

                        .o-checkbox_check{
                            path{
                                stroke-dashoffset: 0;
                                transition: stroke-dashoffset 150ms $ease-in;
                            }
                        }
                    }
                }
            }

            & ~ label{
                vertical-align: middle !important;
                position: relative !important;
                left: 0 !important;
                pointer-events: all !important;
                cursor: pointer !important;
            }
        }
    }

    .o-help,
    .o-error{
        padding: 0 0 0 $unit-half !important;
    }
}

.o-color{
    display: flex;
    justify-content: flex-start;
    align-items: center;
    margin-bottom: $base-margin-bottom;
    padding: $unit-half;

    input{
        padding: 0 !important;
        width: 32px !important;
        height: 32px !important;
        border: 0 !important;
        box-shadow: 0 2px 4px rgba($black, 0.2);
        cursor: pointer;

        &:focus{
            & + label{
                color: rgba($black, 0.6) !important;
                bottom: auto !important;
                transition: all 150ms $ease-in;
                font-size: 16px !important;

                section.-dark-background & {
                    color: rgba($white, 0.6) !important;
                }
            }
        }
    }

    label{
        pointer-events: all !important;
        margin-left: $unit;
        cursor: pointer;
    }
}

.o-form{
    &.-square{
        input,
        select,
        textarea{
            border-radius: 0 !important;
        }
    }

    &.-no-margins{
        .o-textarea,
        .o-input,
        .o-switch,
        .o-radio,
        .o-checkbox{
            margin-bottom: 0 !important;
        }
    }

    // Textarea Input
    .o-textarea{
        position: relative;
        width: 100%;
        margin-bottom: $base-margin-bottom;
        transition: all 150ms $ease;

        &.has-helper{
            margin-bottom: $expanded-margin-bottom;
        }

        &.is-invalid{
            margin-bottom: $expanded-margin-bottom;

            html.has-js & {
                .o-error{
                    opacity: 1;
                    transform: translateY(0);
                    transition: transform 150ms $ease-in, opacity 25ms $ease-in;
                }
            }

            textarea{
                border-color: rgba($error, 0.87) !important;
                padding: 31px 15px 15px;
                transition: border 150ms $ease, padding 150ms $ease;

                &:focus{
                    border-color: rgba($error, 0.87) !important;

                    & + label{
                        color: rgba($error, 0.87) !important;
                    }
                }

                & + label{
                    top: 12px;
                    font-size: 12px;
                    color: $error !important;
                }
            }
        }

        &.has-value{
            textarea{
                & + label{
                    top: 12px;
                    font-size: 12px;
                }
            }
        }

        textarea{
            padding: 32px 16px 16px;
            border-radius: 4px;
            width: 100%;
            min-height: 106px;
            transition: border-color 150ms $ease-sharp, padding 150ms $ease-sharp;
            border-width: 2px;
            border-style: solid;

            & + label{
                position: absolute;
                top: 20px;
                left: 16px !important;
            }

            @include hover{
                border: 2px solid rgba($off-black, 0.6);
                transition: border 150ms $ease-in;
            }

            &:focus{
                padding: 31px 15px 15px;
                transition: border 150ms $ease-in, padding 150ms $ease-in;

                & + label{
                    top: 12px;
                    font-size: 12px !important;
                }
            }
        }
    }

    // Input
    .o-input{
        height: 56px;
        width: 100%;
        position: relative;
        margin-bottom: $base-margin-bottom;
        transition: all 150ms $ease;

        &.-square{
            input,
            select,
            textarea{
                border-radius: 0 !important;
            }
        }

        &.is-invalid{
            margin-bottom: $expanded-margin-bottom;

            input,
            select{
                & + label{
                    color: rgba($error, 0.87) !important;
                }
            }

            .o-help{
                opacity: 0;
                transition: opacity 25ms $ease-sharp;
            }

            .o-error{
                opacity: 1;
                transform: translateY(0);
                transition: transform 150ms $ease-in, opacity 25ms $ease-in;
            }
        }

        &.has-helper{
            margin-bottom: $expanded-margin-bottom;
        }

        .-visible,
        .-hidden{
            @include position(absolute, 50% 0 null null);
            transform: translateY(-50%);
            cursor: pointer;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            opacity: 0.3;
            transition: all 150ms $ease;
            @include size(48px, 48px);

            svg{
                @include size(22px, 22px);
            }

            &::before{
                content:"";
                position: absolute;
                display: inline-block;
                border-radius: 100%;
                @include size(32px, 32px);
                transform: scale(0);
                transform-origin: center;
                opacity: 0;
                transition: transform 125ms $ease-sharp, opacity 25ms 100ms $ease-out;
            }

            &::after{
                content:"";
                position: absolute;
                display: inline-block;
                border-radius: 100%;
                @include size(32px, 32px);
                transform: scale(0);
                opacity: 0;
                transition: transform 150ms $ease-sharp, opacity 25ms 50ms $ease-out;
            }

            @include hover{
                opacity: 0.87 !important;

                &:before{
                    transform: scale(1);
                    opacity: $primary-hover-opacity;
                    transition: transform 150ms $ease-in, opacity 75ms $ease-in;
                }
            }

            @include active{
                &:after{
                    transform: scale(1);
                    opacity: $primary-active-opacity;
                    transition: transform 150ms $ease-in, opacity 75ms $ease-in;
                }
            }
        }

        &.has-content-hidden,
        &.has-content-visible{
            input{
                padding-right: 48px !important;
            }
        }

        // Used for password and pin inputs
        // The password field is hidden (default)
        &.has-content-hidden{
            .-visible{
                display: none;
            }

            .-hidden{
                display: inline-flex;
            }
        }

        // Used for password and pin inputs
        // The password field is visible
        &.has-content-visible{
            .-visible{
                display: inline-flex;
            }

            .-hidden{
                display: none;
            }
        }

        @include hover{
            .-visible,
            .-hidden{
                opacity: 0.6;
            }
        }
    }

    // Text objects
    .o-error,
    .o-help{
        padding: $unit-half;
        @include position(absolute, 100% null null 0);
        width: 100%;
        font-size: 12px;
        text-overflow: ellipsis;
        white-space: nowrap;
        max-width: 100%;
        overflow: hidden;

        svg{
            margin-right: 4px;
        }
    }

    // Error object
    .o-error{
        color: rgba($error, 0.87) !important;
        opacity: 0;
        transform: translateY(5px);
        transition: transform 150ms $ease-sharp, opacity 150ms $ease-out;

        svg{
            @include size(12px, 12px);
            transform: translateY(1px);
        }
    }

    // Helper object
    .o-help{
        opacity: 1;
        transition: opacity 150ms 75ms $ease-sharp;
    }

    // Dropdown arrow icon
    .o-arrow{
        @include position(absolute, 50% 12px null null);
        transform: translateY(-60%);
        user-select: none;
        pointer-events: none;

        svg{
            @include size(22px, 22px);
        }
    }

    // General input
    input{
        &.has-icon{
            padding-left: 48px !important;
            padding-right: 16px !important;
        }
    }

    // General label
    label{
        user-select: none;
    }

    .o-icon{
        position: absolute;
        left: 17px;
        bottom: 17px;
        font-size: 22px;
        user-select: none;
        pointer-events: none;
    }

    // Outline Input Style
    @import './form-styles/outline';

    // Solid Input Style
    @import './form-styles/solid';

    // Base Style
    @import './form-styles/underline';
}
